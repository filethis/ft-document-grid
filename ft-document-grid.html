<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../iron-list/iron-list.html">

<link rel="import" href="../ft-document-grid-item/ft-document-grid-item.html">

<!--
`ft-document-grid`
An element that renders a list of FileThis document items in a grid layout.

@demo demo/index.html
-->

<dom-module id="ft-document-grid">

    <style include="iron-flex iron-flex-alignment"></style>

    <template>

        <iron-list selection-enabled
                   grid
                   id="documentGrid"
                   items="[[documents]]"
                   selected-item="{{selectedDocument}}"
                   as="item">

            <!-- Document item template -->
            <template>
                <ft-document-grid-item
                        document="[[item]]"
                        selected$="[[selected]]">
                </ft-document-grid-item>
            </template>
        </iron-list>

    </template>

    <script>
        Polymer({

            is: 'ft-document-grid',

            properties: {

                /** The list of document resources to be be displayed. */
                documents:
                {
                    type: Array,
                    notify: true,
                    value: [],
                    observer: "_onDocumentsChanged"
                },

                /** The currently-selected document, if any. */
                selectedDocument:
                {
                    type: Object,
                    notify: true,
                    value: null
                }
            },

            _onDocumentsChanged: function()
            {
                // Hack for some kind of bug in iron-list
                this.async(function() { this.$.documentGrid.fire('iron-resize'); }, 1);
            }

        });
    </script>
</dom-module>
